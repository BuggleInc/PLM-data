var running = true;

while (running) {
  readMessage() match {
    case "R" => right(); forward()
    case _ => running = false
  }
}