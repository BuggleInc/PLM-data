override def run() //CHECKED
{
  repererSortie()
  var valeur=0
  while (!marquageComplet())
  {
    for (i <- 0 to getMondeLargeur()-1)
    {
      for (j <- 0 to getMondeHauteur()-1)
      {
				if (getIndication(i,j)==valeur)
        	marquerCasesAdjacentes(repererCasesAdjacentes(i,j),i,j)
      }
    }
    valeur +=1
  }
  allerSortie()
  prendBiscuit()
} 

def marquageComplet():Boolean = //vérifie si on a marqué toutes les cases CHECKED
{
  for (i <- 0 to getMondeLargeur()-1)
  {
    for (j <- 0 to getMondeHauteur()-1)
    {
      if (getIndication(i,j)==9999)
        return false
    }
  }
  return true
}

def repererSortie() //repère sortie, y met 0 CHECKED
{
  for (i <- 0 to getMondeLargeur()-1)
  {
    for (j <- 0 to getMondeHauteur()-1)
    {
      if (aBiscuit(i,j))
      {
        setIndication(i,j,0)
      }
    }
  }
}

def repererCasesAdjacentes(X:Int,Y:Int):Array[Boolean]= //repère cases adjacentes CHECKED
{
  var casesAdjacentes:Array[Boolean]=new Array[Boolean](4)
	casesAdjacentes(0) = false
  casesAdjacentes(1) = false
  casesAdjacentes(2) = false
  casesAdjacentes(3) = false
  //on analyse sa propre case
  if (X!=0)
  {
    if (!aMurOuest(X,Y))
    	casesAdjacentes(0)=true
  }
  if (Y!=0)
  {
  	if (!aMurNord(X,Y))
    	casesAdjacentes(1)=true
  }
  //on analyse case à droite
  if (X!=getMondeLargeur()-1)
  {
    if (!aMurOuest(X+1,Y))
  		casesAdjacentes(2)=true
  }
  //on analyse case en dessous
  if (Y!=getMondeHauteur()-1)
  {
    if (!aMurNord(X,Y+1))
  		casesAdjacentes(3)=true
  }
  return casesAdjacentes
}

def marquerCasesAdjacentes(casesAdjacentes:Array[Boolean],X:Int,Y:Int) //marque cases adjacentes
{
  var maCase=getIndication(X,Y)
  if (casesAdjacentes(0)==true)
  {
    if (getIndication(X-1,Y)==9999)
    	setIndication(X-1,Y,maCase+1)
    	avance()
  }
  if (casesAdjacentes(1)==true)
  {
    if (getIndication(X,Y-1)==9999)
    	setIndication(getX(),getY()+1,maCase+1)
  }
  if (casesAdjacentes(2)==true)
  {
    if ((getIndication(X+1,Y)==9999))
    	setIndication(X+1,Y,maCase+1)
  }
  else
  {
    if (getIndication(X,Y+1)==9999)
    	setIndication(X,Y+1,maCase+1)
  }
}

def allerSortie() //atteint la sortie en lisant le sol
{
  var indications:Array[Int]=new Array[Int](4)
  if (getX()==0)
  	indications(0)=9999
  if (getX()!=0)
  	indications(0)=getIndication(getX()-1,getY())
  if (getY()==0)
  	indications(1)=9999
  if (getY()!=0)
  	indications(1)=getIndication(getX(),getY()-1)
  if (getX()==getMondeLargeur())
  	indications(2)=9999
  if (getX()!= getMondeLargeur())
  	indications(2)=getIndication(getX()+1,getY())
  if (getY()==getMondeHauteur())
  	indications(3)=9999
  else
  	indications(3)=getIndication(getX(),getY()+1)
  var minimum=9999
  for (i<- indications)
  {
    if (i<minimum)
    {
      minimum=i
    }
  }
  if (minimum==indications(0))
  {
    gauche()
  	avance()
    droite()
  }
	if (minimum==indications(1))                                                                {
    avance()
  }
	if (minimum==indications(2))
	{
    droite()
    avance()
    gauche()
  }
	else
		recule()                                                                           
}