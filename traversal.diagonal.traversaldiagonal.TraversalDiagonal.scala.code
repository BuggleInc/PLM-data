var diag = 0;
override def run() {
  var c=0
  var p=0
  for (x<- 0 to 6){
    p=diag
    for (y <- 0 to diag){
      
      if (readMessage()!="0"){
        writeMessage(c);
      }
      setPos(y,p);
      if (readMessage()!="0"){
        c+=1;
      }
      p= p -1
    }
    diag= diag +1
  }
  diag=diag-1
  
  for (x<- 0 to 6){
    p=7
    for (y <- 7-diag  to 5){
      
      writeMessage(c);
      setPos(y,p);
      c+=1
      p= p -1
    }
    diag= diag -1
  }
  
}